---
layout: case-study
---
<section id="about" class="c-section c-section__3 o-height--half o-center--vertical" style="position:relative;background-image:url('{{ "assets/img/styleguide--hero.png" | relative_url }}');">
  <div class="o-overlay__image--black"></div>
  <div class="o-wrapper" style="width:100%;">
    <div class="o-layout">
      <div class="o-layout__item u-2/3@desktop u-1/1@tablet">
        <h1 style="margin-bottom: 48px;">Sundance.org UI&nbsp;Framework Overhaul</h1>
        <p>A case study about how we vanquished Sundance.org's CSS bloat.</p>
      </div>
    </div>
  </div>
</section>

<section class="c-section" style="margin-top:100px">
  <div class="o-wrapper" style="width:100%;">
    <div class="o-layout">
      <div class="o-layout__item u-1/1@desktop u-1/1@tablet">

        <p><a href="#design">I. Sketch Overhaul</a></p>
        <p><a href="#code">II. CSS Methodology</a></p>
        <p><a href="#jekyll">III. Abstract Refactoring</a></p>

        <h3 id="design">I. Sketch Overhaul (Design Debt)</h3>
        <p>Sketch 41 introduced nested symbol overrides. This powerful change would enable designers to make symbols out of smaller symbols and have the ability to change content within them using overrides. Utilizing this new feature and rethinking my approach to building interfaces within Sketch would enable me to create and maintain designs more efficiently.</p>

        <p>Rather than rebuilding all of my existing components as symbols, I opted to use UX Power Tools Toolbox as my starting point. After some intense modifications to their entire document, I recreated all of the patterns and designs for Sundance.org. I ended up with hundreds of new symbols. And symbols nested in symbols nested in symbols. The below screenshots of my symbols page give you a sense that what is happening is chaotic, but there is real ingenuity at work here. </p>

        <p><a target="_blank" href="https://medium.com/ux-power-tools/this-is-without-a-doubt-the-coolest-sketch-technique-youll-see-all-day-ddefa65ea959#.pevfkykqk">Jon Moore</a> and <a target="_blank" href="https://medium.com/@lloyd/sketch-symbols-best-practices-now-that-nested-overrides-are-a-thing-9b651d3fe1a4#.3jsbforui">Lloyd Humphries</a>, do a great job of highlighting how best to approach utilizing deep nested symbols in building components within Sketch. </p>

        <div class="o-layout">
          <div class="o-layout__item u-1/3@desktop u-1/3">
            <img style="margin-bottom:24px;" data-action="zoom" src="{{ "assets/img/styleguide-symbols.png" | relative_url }}">
          </div>
          <div class="o-layout__item u-1/3@desktop u-1/3">
            <img style="margin-bottom:24px;" data-action="zoom" src="{{ "assets/img/styleguide-buttonsymbols.png" | relative_url }}">
          </div>
          <div class="o-layout__item u-1/3@desktop u-1/3">
            <img style="margin-bottom:24px;" data-action="zoom" src="{{ "assets/img/styleguide-textsymbols.png" | relative_url }}">
          </div>
        </div>

        <p>In addition to this dramatic change in how I'm crafting my Sketch files, I also took advantage of this opportunity to make a few tweaks, namely adding a baseline grid to our typographic ecosystem. </p>

        <p>With this wheel in motion, our team began exploring how best to approach our refactor. </p>

        <h3 id="code">II. Refactoring with ITCSS/BEM</h3>
        <p>CSS is only as clean and organized as its author dictates. My first attempt at writing CSS on a very large scale was in 2014 when we relaunched Sundance.org. At that time I made some poor decisions along the way by organizing our CSS in a way that doesn't allow for styles to be shared more widely across the entire site and selectors that are way too specific.</p>
        <p>We spent some time researching ways to refactor our CSS and had many conversations with our devs. Ultimately we narrowed things down to ITCSS as a methodology and BEM as our naming convention.</p>
        <p>The ITCSS methodology is based on the idea of organizing CSS in an inverted triangle starting from most broad and far-reaching styles at the top of the hierarchy and building downward to increasingly specific elements. Hereâ€™s a quick breakdown:</p>
        <ul class="o-list-bare">
          <li>1. Settings (variables, font sizes, colors, configs)</li>
          <li>2. Tools (preprocessor mixins and functions)</li>
          <li>3. Generic (normalize, reset, box-sizing)</li>
          <li>4. Elements (HTML DOM elements, no classes)</li>
          <li>5. Objects (non-cosmetic design patterns like wrappers and layouts)</li>
          <li>6. Components (cosmetic design patterns)</li>
          <li>7. Overrides (otherwise known as the shame folder)</li>
        </ul>

        <p><a target="_blank" href="http://www.creativebloq.com/web-design/manage-large-scale-web-projects-new-css-architecture-itcss-41514731">For those interested, Harry Roberts (the creator) provides a fantastic, in-depth explanation</a>.</p>

        <p>I had initially wanted to avoid the use of a framework since they often bring with it a ton of unwanted styles that must first be untangled. Thankfully, as luck would have it, Harry Roberts created InuitCSS. InuitCSS is a framework comprised of both ITCSS and BEM. A framework in its purest sense, InuitCSS comes only with the basic architecture of a CSS library. It contains nothing in the way of design. <em>Music to my ears!</em></p>

        <p>This worked extremely well. InuitCSS has so much utility out of the box that you can assemble entire patterns without having to write very many additional custom classes. The file size of the refactored CSS came in at less than 1/3rd of what it was previously.</p>

        <h3 id="jekyll">III. Abstract Refactoring</h3>

        <p>One of the biggest risks when performing a refactor of this scale is that you are making sweeping changes to the codebase. As this is happening, coordinating work between the team becomes very challenging and you're now having to toil with two separate libraries of CSS at once. Our team really wanted to avoid this nightmare. We opted to perform this refactor beforehand, creating all of the components in abstract form before touching the production codebase.</p>

        <p>To do this, I spun up a Jekyll instance, installed Inuit and started assembling our new CSS library on a static front-end by building out every component on Sundance.org. The result of this work is now a <a target="_blank" href="https://sundance-org.github.io/styles/cards/">living styleguide</a>, which our developers can now reference for documentation, code snippets and live examples.</p>

        <p>With all of this front-end work done up front, integrating this into the production codebase was a much quicker process and posed far less risk.<p>

        <div class="o-layout">
          <div class="o-layout__item u-1/3@desktop u-1/3@tablet u-1/2@mobile">
            <img data-action="zoom" src="{{ "assets/img/styleguide-1.png" | relative_url }}">
          </div>
          <div class="o-layout__item u-1/3@desktop u-1/3@tablet u-1/2@mobile">
            <img data-action="zoom" src="{{ "assets/img/styleguide-0.png" | relative_url }}">
          </div>
          <div class="o-layout__item u-1/3@desktop u-1/3@tablet u-1/1@mobile">
            <img data-action="zoom" src="{{ "assets/img/styleguide-0.png" | relative_url }}">
          </div>
        </div>

        <h3>The Results</h3>
        <div class="o-layout">
          <div class="o-layout__item u-1/3@desktop">
            <ul class="o-list-bare">
              <li><strong>Pre-refactor CSS:</strong><br>1025kb at 27,477 lines</li>
              <li><strong>Post-refactor CSS:</strong><br>300kb at 8,000 lines</li>
              <li><strong>Estimated Final CSS File:</strong><br>~175kb (after minification)</li>
            </ul>
          </div>
          <div class="o-layout__item u-1/3@desktop">
            <ul class="o-list-bare">
              <li><strong>Pre-refactor largest selector length:</strong><br>11</li>
              <li><strong>Post-refactor largest selector length:</strong><br>7</li>
            </ul>
          </div>
          <div class="o-layout__item u-1/3@desktop">
            <ul class="o-list-bare">
              <li><strong>Pre-refactor total selectors used:</strong><br>4674</li>
              <li><strong>Post-refactor total selectors used:</strong><br>939</li>
            </ul>
          </div>
        </div>

        <h3>What did we learn?</h3>
        <p>It's true that having developers present for as much of the design process as possible is necessary for creating great products. Having designers who are capable of contributing to the development process can also be invaluable. Our project minimized the "hand-off" problem by working to remove it from the process entirely.</p>
      </div>
    </div>
  </div>
</section>
